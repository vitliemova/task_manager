server {
    listen 80;

    # 1. Serve the Static Frontend
    location / {
        root /usr/share/nginx/html;
        index index.html;
    }

    # 2. Proxy requests to the Python API
    location /api/python/ {
        rewrite ^/api/python/(.*) /$1 break; # Strip /api/python from the request
        proxy_pass http://api:5000;
        proxy_method $request_method; # Ensures PUT/DELETE are passed through
    }

    # 3. Proxy requests to the Go Monitor
    location /api/go/ {
        rewrite ^/api/go/(.*) /$1 break; # Strip /api/go from the request
        proxy_pass http://monitor:8080;
    }
}